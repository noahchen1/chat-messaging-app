{"ast":null,"code":"var _jsxFileName = \"D:\\\\Repo\\\\offical-messenger\\\\src\\\\context\\\\SocketProvider.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useEffect, useState } from 'react';\nimport { io } from 'socket.io-client';\nimport { useAuth } from './AuthProvider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SockeContext = /*#__PURE__*/createContext();\nexport function useSocket() {\n  _s();\n  return useContext(SockeContext);\n}\n_s(useSocket, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport function SocketProvider(_ref) {\n  _s2();\n  let {\n    children\n  } = _ref;\n  const [socket, setSocket] = useState();\n  const {\n    auth\n  } = useAuth();\n  const id = auth.refreshToken;\n  useEffect(() => {\n    const newSocket = io('http://localhost:4000', {\n      query: {\n        id\n      }\n    });\n    setSocket(newSocket);\n    console.log(socket);\n    return () => newSocket.close();\n  }, [id]);\n  return /*#__PURE__*/_jsxDEV(SockeContext.Provider, {\n    value: socket,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 9\n  }, this);\n}\n_s2(SocketProvider, \"3azqpEagnNNUvSoETqWDe7eXekA=\", false, function () {\n  return [useAuth];\n});\n_c = SocketProvider;\nvar _c;\n$RefreshReg$(_c, \"SocketProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","io","useAuth","SockeContext","useSocket","SocketProvider","children","socket","setSocket","auth","id","refreshToken","newSocket","query","console","log","close"],"sources":["D:/Repo/offical-messenger/src/context/SocketProvider.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState } from 'react';\r\nimport { io } from 'socket.io-client';\r\nimport { useAuth } from './AuthProvider';\r\n\r\nconst SockeContext = createContext();\r\n\r\nexport function useSocket() {\r\n    return useContext(SockeContext);\r\n}\r\n\r\nexport function SocketProvider({ children }) {\r\n    const [socket, setSocket] = useState();\r\n    const { auth } = useAuth();\r\n    const id = auth.refreshToken;\r\n\r\n    useEffect(() => {\r\n        const newSocket = io(\r\n            'http://localhost:4000',\r\n            { query: { id } }\r\n        );\r\n        setSocket(newSocket);\r\n\r\n        console.log(socket)\r\n        return () => newSocket.close();\r\n\r\n    }, [id])\r\n\r\n    return (\r\n        <SockeContext.Provider value={socket}>\r\n            {children}\r\n        </SockeContext.Provider>\r\n    )\r\n}\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC7E,SAASC,EAAE,QAAQ,kBAAkB;AACrC,SAASC,OAAO,QAAQ,gBAAgB;AAAC;AAEzC,MAAMC,YAAY,gBAAGN,aAAa,EAAE;AAEpC,OAAO,SAASO,SAAS,GAAG;EAAA;EACxB,OAAON,UAAU,CAACK,YAAY,CAAC;AACnC;AAAC,GAFeC,SAAS;AAIzB,OAAO,SAASC,cAAc,OAAe;EAAA;EAAA,IAAd;IAAEC;EAAS,CAAC;EACvC,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGR,QAAQ,EAAE;EACtC,MAAM;IAAES;EAAK,CAAC,GAAGP,OAAO,EAAE;EAC1B,MAAMQ,EAAE,GAAGD,IAAI,CAACE,YAAY;EAE5BZ,SAAS,CAAC,MAAM;IACZ,MAAMa,SAAS,GAAGX,EAAE,CAChB,uBAAuB,EACvB;MAAEY,KAAK,EAAE;QAAEH;MAAG;IAAE,CAAC,CACpB;IACDF,SAAS,CAACI,SAAS,CAAC;IAEpBE,OAAO,CAACC,GAAG,CAACR,MAAM,CAAC;IACnB,OAAO,MAAMK,SAAS,CAACI,KAAK,EAAE;EAElC,CAAC,EAAE,CAACN,EAAE,CAAC,CAAC;EAER,oBACI,QAAC,YAAY,CAAC,QAAQ;IAAC,KAAK,EAAEH,MAAO;IAAA,UAChCD;EAAQ;IAAA;IAAA;IAAA;EAAA,QACW;AAEhC;AAAC,IAtBeD,cAAc;EAAA,QAETH,OAAO;AAAA;AAAA,KAFZG,cAAc;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}